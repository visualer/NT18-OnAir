{"version":3,"sources":["search.js","load-partial.js","main.js","app.js"],"names":["addSearchHandler","$searchInput","$","$searchMaterialTextfield","parent","MaterialTextfield","focus","onUpdateClasses","blur","keydown","e","keyCode","preventDefault","$searchResult","$searchActions","find","searchString","validateSearchString","changeText","text","change","html","idx","result","search","split","map","join","showMsg","hasClass","transition","favFilterEnabled","attr","filter","elem","fav","indexOf","data","ref","id","length","allPagesCount","Math","ceil","currPageCount","$searchActionPrev","$searchActionNext","appendResults","slice","forEach","append","generateResultTemplate","componentHandler","upgradeAllRegistered","click","doHighlight","window","prevSearchHighlight","substring","location","href","errorReport","resultEntry","posterNum","poster_num","colorIndex","includes","sessionDate","parseInt","authorHTML","author","val","index","corr_name","title","corr_email","affl","content","category","$target","target","parentElement","$currTarget","currentTarget","currArticleId","animation","queue","favIndex","isFav","splice","push","localforage","setItem","taphold","isMobile","MaterialTooltip","boundMouseEnterHandler","loadPartial","load","now","performance","console","log","forceReloadTap0","forceReloadTap1","this","$parent","$nextAll","nextAll","$arrow","prev","children","hasAttribute","clickTab","searchGroup","categoryIndex","findIndex","trigger","Event","scrollToTop","toggleArrowRotation","toggleClass","swiperObj","Swiper","autoHeight","spaceBetween","roundLengths","navigation","nextEl","prevEl","one","update","$next","next","sessionIndex","test","navigator","userAgent","isPhone","skipA2HS","tabId","stop","animate","scrollTop","replace","trim","mark","exclude","wildcards","checkDeferredPrompt","deferredPrompt","remove","prompt","userChoice","then","choiceResult","outcome","alert","message","actionHandler","arguments","undefined","actionText","timeout","sb","MaterialSnackbar","showSnackbar","hideSnackbar","rotate","deg","duration","easing","step","css","init","ajaxSetup","error","xhr","status","exception","setTimeout","$stBtn","scroll","st","initializeActions","getJSON","data_","lunr","Index","config","driver","INDEXEDDB","WEBSQL","LOCALSTORAGE","name","getItem","err","$ffBtn","ffState","$hlBtn","hlState","unmark","$searchField","$searchInputLabel","isLocalhost","Boolean","hostname","match","protocol","serviceWorker","register","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","reload","Error","catch","addEventListener"],"mappings":"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","file":"app.min.js","sourcesContent":["'use strict';\n\nfunction addSearchHandler() {\n\n  let $searchInput = $('#searchInput');\n  let $searchMaterialTextfield = $searchInput.parent()[0].MaterialTextfield;\n  $searchInput.focus(() => $searchMaterialTextfield.onUpdateClasses());\n  $searchInput.blur(() => $searchMaterialTextfield.onUpdateClasses());\n  $searchInput.keydown((e) => {\n\n    if (e.keyCode !== 13) return true; // $.ui.keyCode.ENTER\n    e.preventDefault();\n\n    let $searchResult = $('#searchResult');\n    let $searchActions = $('#abstract').find('.mdl-card__actions');\n    let searchString = validateSearchString();\n    let changeText = (text) => { $searchMaterialTextfield.change(text); };\n\n    changeText(searchString); // show legitimized input\n    $searchResult.html('');\n\n    if (idx === null) {\n      showMsg('Abstracts load error.', () => { location.href = errorReport; }, 'Report');\n      return;\n    }\n\n    let result = [];\n    try {\n      result = idx.search(searchString === '' ? '*' :\n        searchString.split(' ').map((e) => e[0] === '-' ? e : `+${e}`).join(' ')\n      );\n    } catch (e) {\n      showMsg('Unrecognized input.', () => changeText(''), 'Clear Input');\n      if (!$searchActions.hasClass('hidden')) $searchActions.transition('fade out');\n      return;\n    }\n\n\n    // favorite filtering\n    let favFilterEnabled = $('#favFilterButton').attr('data-fav-filter-state') === \"1\";\n    if (favFilterEnabled) result = result.filter((elem) => fav.indexOf(data[elem.ref].id) > -1);\n\n    if (result.length === 0) {\n      if (favFilterEnabled)\n        showMsg('No favorites found.');\n      else\n        showMsg('No results found.', () => { changeText(''); }, 'Clear Input');\n      if (!$searchActions.hasClass('hidden')) $searchActions.transition('fade out');\n      return;\n    }\n\n\n    // auto paging\n    let resultsPerPage = 12;\n    let allPagesCount = Math.ceil(result.length / resultsPerPage); // maybe use bitwise operator?\n    let currPageCount = 1;\n    let $searchActionPrev = $('#searchActionPrev');\n    let $searchActionNext = $('#searchActionNext');\n\n    let appendResults = () => {\n\n      $searchResult.html('');\n      $searchActionPrev.attr('disabled', (currPageCount === 1) ? 'disabled' : null);\n      $searchActionNext.attr('disabled', (currPageCount === allPagesCount) ? 'disabled' : null);\n      $('#searchActionPageNum').html(`${currPageCount} / ${allPagesCount}`);\n\n      result.slice((currPageCount - 1) * resultsPerPage, currPageCount * resultsPerPage).forEach((elem) => {\n        $searchResult.append(generateResultTemplate(elem));\n      });\n      componentHandler.upgradeAllRegistered();\n    };\n\n    // search finalizing\n    appendResults();\n    $searchActionPrev.click(() => { currPageCount -= 1; appendResults(); doHighlight(); });\n    $searchActionNext.click(() => { currPageCount += 1; appendResults(); doHighlight(); });\n    componentHandler.upgradeAllRegistered();\n    if ($searchActions.hasClass('hidden')) $searchActions.transition('fade in');\n    $searchInput.blur();\n\n    // keyword highlighting\n    window.prevSearchHighlight = searchString.split(' ').map((e) => {\n      if (e[0] === '-') return '';\n      if (e[0] === '+') e = e.substring(1);\n      if (e.substring(0, 9) === 'category:' || e.substring(0, 8) === 'session:') return '';\n      // now a valid search will either be 'author:xx*', 'title:xx*', 'content:xx*', 'xx*' or 'xx'\n      return e.substring(e.indexOf(':') + 1);\n    });\n    // as the search is valid and mark button is visible, highlight can be performed\n    doHighlight();\n\n  });\n}\n\n\n\n\nfunction generateResultTemplate(elem) {\n\n  let colors = ['mdl-color--deep-purple-400', 'mdl-color--blue-900'];\n\n  let resultEntry = data[elem.ref];\n  let posterNum = resultEntry.poster_num;\n  let colorIndex = 'SC'.includes(posterNum[1]) ? 0 : 1;\n  let sessionIndex = (1 + colorIndex) * 2  - parseInt(posterNum.slice(2, 5)) % 2;\n  let sessionDate = ['',\n    'July 17<sup>th</sup> 16:00',\n    'July 18<sup>th</sup> 11:00',\n    'July 19<sup>th</sup> 11:00',\n    'July 19<sup>th</sup> 16:00'][sessionIndex];\n\n\n  let authorHTML = resultEntry.author\n    .map((val, index) => val !== (resultEntry.corr_name || val) ?\n      index !== 0 ? val : `<u>${val}</u>` :\n      `${index !== 0 ? val : `<u>${val}</u>`}*`)\n    .join(', ');\n\n  return $(`\n          <div class=\"mdl-card mdl-cell mdl-shadow--2dp result-unit\n                      mdl-cell--6-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone\"\n               data-article-id=\"${resultEntry.id}\" data-result-id=\"${resultEntry.id}\">\n            <div class=\"mdl-card__title mdl-color-text--white mdl-button-2 mdl-js-button\n                        mdl-js-ripple-effect ${colors[colorIndex]} toggle-button\"\n                 style=\"min-height: 80px;\">\n              <h4 class=\"mdl-card__title-text\" style=\"margin-top: 30px; font-size: 20px;\">${resultEntry.title}</h4>\n            </div>\n            <div class=\"mdl-card__supporting-text hidden\" style=\"padding-top: 0; padding-bottom: 0;\">\n              <h6 style=\"margin: 16px;\">${resultEntry.authorHTML || authorHTML}</h6>\n              <p>\n                *Corresponding: \n                ${resultEntry.corr_email === '' ? '' : `${resultEntry.corr_email}, `}${resultEntry.affl}\n              </p>\n              <hr /><p style=\"line-height: 18px;\">${resultEntry.content}</p>\n            </div>\n            <div class=\"category-info\">\n              <p>${resultEntry.category}: ${posterNum}, ${sessionDate}</p>\n            </div>\n            <button class=\"mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon fav-button\" \n                    id=\"favButton${resultEntry.id}\">\n              <i class=\"material-icons mdl-color-text--white fav-icon\">\n                ${fav.indexOf(resultEntry.id) > -1 ? 'star' : 'star_border'}\n              </i>\n            </button>\n            <div class=\"mdl-tooltip mdl-tooltip--large mdl-tooltip--left\"\n                 data-mdl-for=\"favButton${resultEntry.id}\" data-mdl-taphold=\"true\">\n              ${fav.indexOf(resultEntry.id) > -1 ? 'Remove from' : 'Add to'} favorites\n            </div>\n          </div>\n        `).click((e) => {\n\n          let $target = $(e.target.parentElement);\n          let $currTarget = $(e.currentTarget);\n          let currArticleId = $currTarget.attr('data-article-id');\n\n          if ($target.hasClass('toggle-button')) {\n\n            $currTarget.find('.mdl-card__supporting-text').transition({ animation: 'fade', queue: false });\n            return false;\n\n          } else if ($target.hasClass('fav-button')) {\n\n            let favIndex = fav.indexOf(currArticleId);\n            let isFav = favIndex > -1;\n            $currTarget.find('.fav-icon').html(`star${isFav ? '_border' : ''}`);\n            if (isFav) {\n              fav.splice(favIndex, 1);\n            } else {\n              fav.push(currArticleId);\n            }\n            $currTarget.find('.mdl-tooltip').html(`${isFav ? 'Add to' : 'Remove from'} favorites`);\n            showMsg(`${isFav ? 'Removed from' : 'Added to'} favorites.`);\n            window.localforage.setItem('favorites', fav);\n            return false;\n          }\n\n        }).taphold((e) => {\n          if ($(e.target.parentElement).hasClass('fav-button') && isMobile) {\n            $(e.currentTarget).find('.mdl-tooltip')[0].MaterialTooltip.boundMouseEnterHandler(e);\n          }\n        });\n}\n","\n'use strict';\n\nfunction loadPartial() {\n\n  $('#home-partial').load('data/home-partial.html', () => {\n    componentHandler.upgradeAllRegistered();\n    $('#forceReloadButton').click(() => {\n      let now = performance.now();\n      console.log(now);\n      if (now - forceReloadTap0 > 600) forceReloadTap0 = now;\n      else if (now - forceReloadTap1 > 600) forceReloadTap1 = now;\n      else $('head').append('<style>.mdl-button-2{position:initial;!important;}</style>');\n    });\n  });\n\n\n  $('#topics').load('data/topics-partial.html', () => {\n\n    componentHandler.upgradeAllRegistered();\n\n    $('#topics').find('.mdl-button__ripple-container').click(function () {\n\n      let $target = $(this), $parent = $target.parent(), $nextAll = $parent.nextAll();\n      let $arrow = $target.prev().children(':first');\n\n      if (!$parent[0].hasAttribute('data-expansion')) {\n\n        if (!$parent[0].hasAttribute('data-category')) return false;\n        clickTab('#tabAbstract');\n        let $searchInput = $('#searchInput');\n        let searchGroup = validateSearchString().split(' ');\n        let categoryIndex = searchGroup.findIndex((e) => e.slice(0, 9) === 'category:');\n        if (categoryIndex > -1) searchGroup.splice(categoryIndex, 1);\n        $searchInput.parent()[0]\n          .MaterialTextfield.change(`${searchGroup.join(' ')} category:${$parent.attr('data-category')}`);\n        $searchInput.trigger($.Event('keydown', { keyCode: 13 }));  // trigger search\n        scrollToTop();\n\n        return false;\n      }\n\n      toggleArrowRotation($arrow);\n      $nextAll.slice(0, parseInt($parent.attr('data-expansion'))).toggleClass('hidden');\n    });\n\n  });\n\n\n  $('#schedule').load('data/schedule-partial.html', () => {\n\n    window.swiperObj = new Swiper('.swiper-container', {\n      autoHeight: true,\n      spaceBetween: 70,\n      roundLengths: true,\n      navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' }\n    });\n\n    $('#tabSchedule').one('click', '.mdl-layout__tab-ripple-container', () => { window.swiperObj.update(); });\n\n\n    componentHandler.upgradeAllRegistered();\n\n    $('#schedule').find('.mdl-button__ripple-container').click(function () {\n      let $target = $(this), $parent = $target.parent(), $next = $parent.next();\n      let $arrow = $target.prev().children(':first');\n      if ($parent[0].hasAttribute('data-poster-session-redirect')) {\n\n        clickTab('#tabAbstract');\n        let $searchInput = $('#searchInput');\n        let searchGroup = validateSearchString().split(' ');\n        let sessionIndex = searchGroup.findIndex((e) => e.slice(0, 8) === 'session:');\n        if (sessionIndex > -1) searchGroup.splice(sessionIndex, 1);\n        $searchInput.parent()[0].MaterialTextfield\n          .change(`${searchGroup.join(' ')} session:${$parent.attr('data-poster-session-redirect')}`);\n        $searchInput.trigger($.Event('keydown', { keyCode: 13 }));  // trigger search\n        scrollToTop();\n\n      } else {\n        toggleArrowRotation($arrow);\n        $next.toggleClass('hidden');\n      }\n      return false;\n    });\n\n  });\n\n}\n","\n'use strict';\n\n\nlet data = null;\nlet idx = null;\nlet errorReport = null;\nlet fav = [];\nlet isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);\nlet isPhone = /Android|iPhone|iPod|BlackBerry/i.test(navigator.userAgent);\nlet forceReloadTap0 = -1, forceReloadTap1 = -1;\n\nlet skipA2HS = () => { $('.mdl__loader.non-standalone').transition('fade out'); };\nlet clickTab = (tabId) => {\n  $(tabId).find('span').click();\n  if (tabId === '#tabSchedule') window.swiperObj.update();\n};\nlet scrollToTop = () => {\n  $('.mdl-layout').stop().animate({ scrollTop: 0 }); // for desktop\n  $('.mdl-layout__content').stop().animate({ scrollTop: 0 });\n};\nlet validateSearchString = () => {\n  return $('#searchInput').val().replace(/[^a-zA-Z0-9\\-*:]+/ig, \" \").trim().replace(/\\s{2,}/g, ' ');\n};\nlet doHighlight = () => {\n  if ($('#searchActionMark').attr('data-highlight-state') === '1')\n    $('#searchResult').mark(window.prevSearchHighlight, {\n      exclude: ['h4.mdl-card__title-text', 'div.category-info *'],\n      wildcards: 'enabled'\n    });\n};\n\n\nfunction checkDeferredPrompt() {\n  if (deferredPrompt !== null) {\n    $('#installPromptTooltip').remove();\n    deferredPrompt.prompt();\n    deferredPrompt.userChoice.then(function(choiceResult) {\n      if (choiceResult.outcome === 'dismissed') {\n        showMsg('Installation cancelled. You can still manually install by tapping' +\n          ' \"Add to Home Screen\" option in your browser\\'s menu.', () => {}, 'OK', 10000);\n      } else {\n        alert('NT18 OnAir successfully installed.');\n      }\n    });\n  }\n}\n\nfunction showMsg(message, actionHandler = () => {}, actionText = 'OK', timeout = 3000) {\n  let sb = $('#msgContainer')[0].MaterialSnackbar;\n  sb.showSnackbar({\n    message: message,\n    timeout: timeout,\n    actionHandler: () => { actionHandler(); sb.hideSnackbar(); },\n    actionText: actionText\n  });\n}\n\nfunction toggleArrowRotation($arrow) {\n\n  /* $arrow should be $('<i class=\"material-icons ...\">expand_less</i>') */\n\n  let rotate = parseInt($arrow.attr('data-rotate')) || 0; // 0 or 1. Didn't explicitly declare this (unimportant) attr\n  $arrow.attr('data-rotate', 1 - rotate);\n  $({ deg: rotate * 180 }).animate({ deg: (1 - rotate) * 180 }, {\n    duration: 80,\n    easing: 'swing',\n    step: (now) => { $arrow.css('transform', `rotate(${now}deg)`); }\n  });\n}\n\n\nfunction init() {\n\n  $.ajaxSetup({\n    error: (xhr, status, exception) => {\n      errorReport = `mailto:accel@pku.edu.cn?subject=Bug Report&body=status:${status}; exception:${exception}`;\n      setTimeout(() => {\n        showMsg('Load error.', () => { location.href = errorReport; }, 'Report');\n      }, 3000);\n    }\n  });\n\n  if (isMobile)\n    $('head').append('<style>.mdl-button:not(.mdl-button--fab):hover{background:none!important;}</style>');\n\n  if (isPhone) {\n    let $stBtn = $('#scrollTopButton');\n    $('.mdl-layout__content').scroll(function () {\n      let st = $(this).scrollTop();\n      if (st < 800 && !$stBtn.hasClass('hidden'))\n        $stBtn.transition('fade out');\n      else if (st >= 800 && $stBtn.hasClass('hidden'))\n        $stBtn.transition('fade in');\n    });\n  }\n\n  // process HTML and search filter buttons\n\n  loadPartial(); // ajaxing\n\n  initializeActions();\n\n  // process data and search\n\n  let localforage = window.localforage;\n\n  $.getJSON('data/abstracts.json', function (data_) { data = data_; });\n  $.getJSON('data/abstracts-indexed.json', function (data_) { idx = lunr.Index.load(data_); });\n\n  localforage.config({\n    driver: [localforage.INDEXEDDB, localforage.WEBSQL, localforage.LOCALSTORAGE],\n    name: 'NT18 OnAir'\n  });\n\n  localforage.getItem('favorites', function (err, val) {\n    if (val === null)\n      localforage.setItem('favorites', fav);\n    else\n      fav = val;\n  });\n\n  addSearchHandler();\n\n  componentHandler.upgradeAllRegistered();\n\n}\n\nfunction initializeActions() {\n\n  componentHandler.upgradeAllRegistered();\n\n  let $searchInput = $('#searchInput');\n\n  $('#filterButton')\n    .click(() => { clickTab('#tabTopics'); scrollToTop(); return false; })\n    .taphold((e) => {\n      if (isMobile) $('.filter-button-tooltip')[0].MaterialTooltip.boundMouseEnterHandler(e);\n    });\n\n  $('#favFilterButton')\n    .click(() => {\n      // data-fav-filter-state is reusable attr => declared explicitly, no need to (val | 0)\n      let $ffBtn = $('#favFilterButton'), ffState = 1 - parseInt($ffBtn.attr('data-fav-filter-state'));\n      $ffBtn.attr('data-fav-filter-state', ffState);\n      $ffBtn.find('i.material-icons').html(ffState === 1 ? 'star' : 'star_border');\n      $searchInput.trigger($.Event('keydown', { keyCode: 13 }));\n      return false;\n    })\n    .taphold((e) => {\n      if (isMobile) $('.fav-filter-button-tooltip')[0].MaterialTooltip.boundMouseEnterHandler(e);\n    });\n\n  $('#searchActionMark')\n    .click(() => {\n      let $hlBtn = $('#searchActionMark'), $searchResult = $('#searchResult');\n      let hlState = 1 - parseInt($hlBtn.attr('data-highlight-state'));\n      $hlBtn.attr('data-highlight-state', hlState);\n      $hlBtn.find('i.material-icons').html(hlState === 1 ? 'format_color_reset' : 'border_color');\n      doHighlight(); // if (hlState === 1) is included in the function\n      if (hlState === 0) $searchResult.unmark();\n    })\n    .taphold((e) => {\n      if (isMobile) $('.mark-button-tooltip')[0].MaterialTooltip.boundMouseEnterHandler(e);\n    });\n\n  let $searchField = $searchInput.parent()[0];\n  $searchField.MaterialTextfield.onUpdateClasses = () => {\n    let $searchInputLabel = $('#searchInputLabel');\n    if ($($searchField).hasClass('is-dirty') || $($searchField).hasClass('is-focused'))\n      $searchInputLabel.html('Search...');\n    else $searchInputLabel.html('Search by title/author/content...')\n  };\n\n}\n","\n/* eslint-env browser */\n\nlet deferredPrompt = null;\n\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  let isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          let installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // new content prompt\n                showMsg('New content is available.', () => {\n                  location.reload(true); // true or false doesn't matter?\n                }, 'Reload', 5000);\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n\n  window.addEventListener('beforeinstallprompt', function (e) {\n    e.preventDefault();\n    deferredPrompt = e;\n    return false;\n  });\n\n  $(init);\n\n})();\n"]}